---
layout: post
title: 理解static关键字
category: 编程
tags: 编程，静态
description: 理解static关键字在编程中的作用。
---
>总结下static关键字在常见语言中的作用。

## C语言
### 1.static使的函数内部的局部变量的值持久化，也就是说当再一次调用该函数时，该变量的值会是上一次调动该函数退出时的值(仍是局部变量)。
example：

```c
#include <stdio.h>
void foo()
{
    int a = 10;
    static int sa = 10;
    a += 5;
    sa += 5;
    printf("a = %d, sa = %d\n", a, sa);
}

int main()
{
    int i;
    for (i = 0; i < 10; ++i)
        foo();
}
```
result:

```c
a = 15, sa = 15
a = 15, sa = 20
a = 15, sa = 25
a = 15, sa = 30
a = 15, sa = 35
a = 15, sa = 40
a = 15, sa = 45
a = 15, sa = 50
a = 15, sa = 55
a = 15, sa = 60
```
当你想让局部变量在函数的多次调用之间保持不变，而你又不想使用全局变量，那么这会是一个很好的办法，但也要注意，不要乱用这个特性，因为它会使得你的代码在多线程下不安全，并且晦涩难懂。
使用了static关键字后会将变量存放在静态分配内存区(全局数据区)而不是自动分配内存区(堆栈区)。尽管编程语言没有写出何种内存来实现，但静态分配内存区通常会在编译时保留在程序的数据段，然而自动分配内存区通常以临时栈来实现，随着程序退出函数体，系统就会收回栈内存。




















